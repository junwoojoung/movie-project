<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="goott.spring.project1.MovieMapper">

	<select id="select" resultType="MovieVO">
		select * from(select * from ${movie} order by ${audCount} desc)
		where rownum <![CDATA[ <= ]]> 4 <!-- 그냥 <=로 쓸 경우 태그의 시작으로 인식 -> 오류 -->
	</select>

	<insert id="insert">
		insert into ${userInfo}
 		values (#{userId}, #{userName}, #{userPw}, #{userPhone}, #{userEmail}, #{ssnFront}, #{ssnBack}, default)
	</insert>


	<!-- 아이디 중복 확인 -->
	<select id="idChk" resultType="int">
		select count(*) from ${userInfo}
		where ${userId} = #{userId}
	</select>

	<!-- 로그인 -->
 	<select id="login" resultType="Integer">
 		select count(*) from ${userInfo}
 		where ${userId} = #{userId}
 		and ${userPw} = #{userPw}
  	</select>

</mapper>
