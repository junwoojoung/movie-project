<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="goott.spring.project1.MovieMapper">
<!-- namespace : 주로 dao 클래스의 sqlSession과 연결하기 위한 키로 사용 -->
	<!-- DB 쿼리 작성 -->
	<!-- id : sqlSession의 함수와 연결하기 위해 사용 -->

	<!--
	컬럼이름 : mybatis-config.xml의 name
	${컬럼이름} : mybatis-config.xml의 property의 name과 매칭. DB 테이블의 열
	#{컬럼이름} : dao 클래스의 sqlSession에서 전송받은 데이터(입력받은 데이터)
	 -->

	 <!--
	 	* mapper태그 = 쿼리작성
	 	* <insert>, <select>, <update>, <delete>
	 	* sqlSession의 함수
	 	(insert, selectOne, selectList, update, delete)에 맞게 수행되는 태그
	 -->



	 <!--
	 	resultType : select를 했을때 리턴하는 레코드 타입 선언
	 	- 일반적으로 패키지 이름을 포함한 전체 경로의 클래스 이름을 사용해야 함
	 	- mybatis-config.xml에서 typeAliases 속성을 package로 정의하여 클래스 이름만 사용
	 -->

<!-- select * -->
<!-- from(select * from movie order by audcount desc) -->
<!-- where rownum <= 4; -->

	<select id="select" resultType="MovieVO">
		select * from(select * from ${movie} order by ${audCount} desc)
		where rownum <![CDATA[ <= ]]> 4 <!-- 그냥 <=로 쓸 경우 태그의 시작으로 인식 -> 오류 -->
	</select>


</mapper>
